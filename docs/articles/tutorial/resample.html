<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>
      <div class="hidden name"><code>resample.Rmd</code></div>

    </div>

    
    
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h1>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level1">
<h1 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h1>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    37.2074716</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    15.7959781</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    25.2813048</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=26.0949182</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=26.0949182</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0353436</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      26.09492</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 37.20747</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 15.79598</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 25.28130</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.2619048   0.2105263   0.3043478   0.0240000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.3809524   0.4782609   0.2631579   0.0140000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.2619048   0.1739130   0.3684211   0.0150000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.2142857   0.2777778   0.1666667   0.0160000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.3095238   0.2631579   0.3478261   0.0170000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2857143,fpr.test.mean=0.2807272,fnr.test.mean=0.2900839,timetrain.test.mean=0.0172000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.2857143,fpr.test.mean=0.2807272,fnr.test.mean=0.2900839,timetrain.test.mean=0.0172000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.143399</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2857143,fpr.test.mean=0.2807272,fnr.test.mean=0.2900839,timetrain.test.mean=0.0172000,ber.test.mean=0.2854055,timepredict.test.mean=0.0046000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.143399</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2571429,fpr.test.mean=0.2206280,fnr.test.mean=0.2805024,timetrain.test.mean=0.0160000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.141793</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h1>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h2>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 166     M        R    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2 164     M        R    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3  47     R        M    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 161     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5 107     M        R    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6  35     R        R    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 166     M        R    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2 164     M        R    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3  47     R        M    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 161     M        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5 107     M        R    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6  35     R        R    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 166     M        R    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2 164     M        R    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3  47     R        M    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 161     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5 107     M        R    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6  35     R        R    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M M R M M R</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] R R M M R R</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0175426</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.02</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 10   10     setosa     setosa</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 139 139  virginica  virginica</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 64   64 versicolor versicolor</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 87   87 versicolor versicolor</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 147 147  virginica  virginica</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 86   86 versicolor versicolor</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 144 144  virginica  virginica</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 60   60 versicolor versicolor</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 47   47     setosa     setosa</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 22   22     setosa     setosa</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 135 135  virginica  virginica</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 21   21     setosa     setosa</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level2">
<h2 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h2>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level2">
<h2 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h2>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg cyl     disp        hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 19.83333   6 185.9333 122.16667 3.530000 3.063333 17.92333 0.5000000</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 26.10000   4 106.5429  83.71429 4.122857 2.213286 18.31857 0.8571429</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 16.13750   8 345.7000 197.50000 3.211250 3.909375 16.88000 0.0000000</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 0.5000000 3.833333 3.333333</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 0.8571429 4.285714 1.714286</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 0.0000000 3.000000 3.000000</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg      cyl     disp       hp     drat     wt   qsec        vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 25.08000 4.600000 119.7700  95.3000 4.047000 2.5313 19.052 0.9000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 14.91667 8.000000 390.6667 228.1667 3.320000 4.1165 16.495 0.0000000</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 16.96667 7.333333 276.1000 145.8333 2.981667 3.5800 18.205 0.3333333</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.6000000 4.000000  2.3</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.3333333 3.666667  4.0</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.0000000 3.000000  2.0</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg      cyl     disp        hp     drat       wt     qsec</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 13.41429 8.000000 390.5714 248.42857 3.408571 4.309857 16.22429</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 16.00000 8.000000 289.8667 170.00000 2.966667 3.676667 17.49000</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 24.63636 4.545455 121.5727  94.81818 3.946364 2.551364 18.79545</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##          vs        am     gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 0.0000000 0.2857143 3.571429 4.571429</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 0.0000000 0.0000000 3.000000 2.666667</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 0.7272727 0.6363636 4.090909 2.272727</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn   indus chas      nox       rm      age      dis rad</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 8294.726 577.6119 9350.68    0 8878.762 14731.35 8561.361 2856.796   0</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        tax  ptratio       b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 1298.921 1763.234 409.063 18277.82</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim       zn    indus     chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 2886.606 1357.745 617.5764 34.29338 2019.123 15815.97 2391.003 1913.949</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##       rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 250.785 2027.145 2285.104 340.6896 11046.32</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn    indus chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 10395.28 415.5004 10799.92    0 10535.54 13969.45 7966.842 3261.815</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 2419.768 990.7061 1386.237 537.6316 16976.97</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 226 187 313  70  83 136 213 324 455 300 487 361 462  47 103 497 353</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18]  26 222 309 369  90 340 302 238  58 247 231 414 164 395 499 170 137</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 198  85 102 347 115 446 438  82 178 285 328 492 202  46 326 453  63</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 224 283  24 376   8 249 256 209  45 112 291  74 325 480 478 505 396</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 212 336 275 189 375 477 454 308 491 420 365   7 280  10 303 402 437</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 459 260 191 156 464  56 397 417   3  64 297 227 111 180 114   4  28</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 273   9 471 331 372  37 412 288 321 122 177 407 351 427 377 484 107</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120] 290 200 400 470 292 116 315  54 270 316 168 344   5 426  60  32 408</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 481  27 141   1  96  29 264 424 296  18 357 500 389 139 261 468 428</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 445 358 319 502 343  55 366  25 185 192 281 152 129 418  48 457 140</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171] 444 197  97  77  76  23 250 495 109  66 172 329 210 380 203 355 371</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188] 314 230 253 503 181 251 338 162 360 465   2 311 392 190 150  34 135</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205] 436  15 356  36 440  52  41 262 490 194 350 125 483 422  51  84 266</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222] 423 286 101 388 201 294 169 193 434 449 442  44 386 382 430  53 378</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239]  17  80 117 348 394  49  91 364 208  89 199 146 234  95 259 383 381</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256] 482 373 133 363 293 498 387 160  94 416 399 317 306  81 443 475 274</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273]  59 339  69 235 118 276  67 341 173 298 304 268 485 432 385 284 390</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290] 501 195 220 450 110 403 106 425 142 346 246 229 158 148 401  31 352</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307]  20 119 265 393 175  30 176  11 167 244 277 451 310 149 171  19 362</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 237 196 330 179 269 398  21 278 245 143 474  16 161 410</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 313  70  83 367 213  50 324  39 241 487 361  14 318 497 206 353  26</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18] 309  90 340 302 405  22  42 238 100 334 295 247 414 164 395 499 433</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 170 469  85 207 127 217 102 347 134 115 370  93 337 446  82 242 429</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 188 285 328 492 153 272 419 320 128 202 121 504 267 257 488 283 327</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 258 131 233 209 441 413 439 112  62 379  61 182  74 289 478  88 505</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86]  12 155 275 151 472 454 491 174 333 132  43 406 211  65 459 223 397</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 391   3 252 145 345 124 297 180 183 331  37 104 412 288 435 321 122</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 407 113 255 427 107 248 400 292 116 315  54 270 359 316 168 344  13</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 426  78  32 408 481 282 409  27 141  96 163 215 506 296  18 357 500</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154] 263 323 139 342 445  71 126 204 502 343 496  55 154 463 281  75 152</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 457  97  77  76  23 495 109 172 301 329 476 210 221 271 203 335 314</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 232 181  98 251 338 105 360 190 368 150 467 349  34 305 452 135 460</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205] 436 184  15 299 147  35 138  92 356  36  52 262  72 332 350 125 483</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 307 225 286 165 101 388 193 236 434 449 216  44 386 159 384 254  53</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239]  17 117  40  49 218  91  33 144  38 312 228  89 146  57 234   6  95</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 461 157 498 387 160  94 494 493  81 443  87  59 339 120  73 473 118</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273] 276  67 341 173 298 186 485 205 354 479 432 447 390 243 108 130 220</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290]  79 466 450 110 403 240 106 374 142 346  68 229 322 239  31  20  99</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307] 404 119 265 411  86 431  30  11 489 166 279 244 277 451 421 310 458</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 171 214 287 123 362 448 219 196 179 415 278 486 474 161 456</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 226 187 136 367  50 455  39 300 241 462  47  14 318 103 206 222 369</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 405  22  42 100  58 334 295 231 433 137 469 198 207 127 217 134 370</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35]  93 337 438 242 429 188 178 153 272 419 320 128  46 121 504 326 453</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 267 257 488  63 224 327  24 376 258   8 249 131 256 233  45 441 413</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 439 291  62 379  61 182 325 480 289  88 396  12 155 212 336 189 151</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 472 375 477 308 174 333 132 420 365  43   7 280 406 211  10 303 402</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103]  65 437 260 191 156 464 223  56 391 417 252 145 345 124  64 227 111</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 114   4  28 273   9 471 183 372 104 435 177 113 255 351 377 484 290</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137] 200 248 470 359   5  13  78  60 282 409   1  29 264 424 163 215 506</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 263 323 389 261 468 342 428 358  71 126 204 319 496 366 154  25 185</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171] 192 463  75 129 418  48 140 444 197 250  66 301 476 380 221 271 335</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188] 355 371 232 230 253 503  98 105 162 465   2 311 392 368 467 349 305</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 452 460 184 299 147  35 138  92 440  41 490 194  72 332 422  51  84</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222] 266 307 423 225 165 201 294 169 236 216 442 382 159 430 384 254 378</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239]  80 348 394  40 218  33 364 208 144  38 312 228 199  57   6 259 383</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 381 482 373 133 363 293 461 157 416 399 494 493 317 306 475  87 274</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273] 120  73  69 235 473 186 304 268 205 354 479 385 284 447 243 108 130</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 501 195  79 466 240 425 374  68 246 158 148 401 322 239 352  99 404</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307] 393 411  86 431 175 176 489 166 279 167 421 458 149 214 287 123  19</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 448 237 219 330 269 398 415  21 245 486 143  16 456 410</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   6  12  13  14  22  33  35  38  39  40  42  43  50  57  61  62  65</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  68  71  72  73  75  78  79  86  87  88  92  93  98  99 100 104 105</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 108 113 120 121 123 124 126 127 128 130 131 132 134 138 144 145 147</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 151 153 154 155 157 159 163 165 166 174 182 183 184 186 188 204 205</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 206 207 211 214 215 216 217 218 219 221 223 225 228 232 233 236 239</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 240 241 242 243 248 252 254 255 257 258 263 267 271 272 279 282 287</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 289 295 299 301 305 307 312 318 320 322 323 327 332 333 334 335 337</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 342 345 349 354 359 367 368 370 374 379 384 391 404 405 406 409 411</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 413 415 419 421 429 431 433 435 439 441 447 448 452 456 458 460 461</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 463 466 467 469 472 473 476 479 486 488 489 493 494 496 504 506</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   1   2   4   5   7   8   9  10  16  19  21  24  25  28  29  41  45</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  46  47  48  51  56  58  60  63  64  66  69  80  84 103 111 114 129</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35] 133 136 137 140 143 148 149 156 158 162 167 169 175 176 177 178 185</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 187 189 191 192 194 195 197 198 199 200 201 208 212 222 224 226 227</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 230 231 235 237 245 246 249 250 253 256 259 260 261 264 266 268 269</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 273 274 280 284 290 291 293 294 300 303 304 306 308 311 317 319 325</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 326 330 336 348 351 352 355 358 363 364 365 366 369 371 372 373 375</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 376 377 378 380 381 382 383 385 389 392 393 394 396 398 399 401 402</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 410 416 417 418 420 422 423 424 425 428 430 437 438 440 442 444 453</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 455 462 464 465 468 470 471 475 477 480 482 484 490 501 503</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   3  11  15  17  18  20  23  26  27  30  31  32  34  36  37  44  49</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  52  53  54  55  59  67  70  74  76  77  81  82  83  85  89  90  91</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35]  94  95  96  97 101 102 106 107 109 110 112 115 116 117 118 119 122</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 125 135 139 141 142 146 150 152 160 161 164 168 170 171 172 173 179</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 180 181 190 193 196 202 203 209 210 213 220 229 234 238 244 247 251</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 262 265 270 275 276 277 278 281 283 285 286 288 292 296 297 298 302</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 309 310 313 314 315 316 321 324 328 329 331 338 339 340 341 343 344</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 346 347 350 353 356 357 360 361 362 386 387 388 390 395 397 400 403</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 407 408 412 414 426 427 432 434 436 443 445 446 449 450 451 454 457</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 459 474 478 481 483 485 487 491 492 495 497 498 499 500 502 505</a></code></pre></div>
</div>
</div>
<div id="stratification-and-blocking" class="section level1">
<h1 class="hasAnchor">
<a href="#stratification-and-blocking" class="anchor"></a>Stratification and blocking</h1>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h2>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0268081</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.205578</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h2>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=25.8338451</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0290556</a></code></pre></div>
</div>
<div id="blocking" class="section level2">
<h2 class="hasAnchor">
<a href="#blocking" class="anchor"></a>Blocking</h2>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> <code>factor</code> when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level1">
<h1 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h1>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb20-6" data-line-number="6"></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## List of 4</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">##  $ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">##  $ iters   : int 3</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">##  $ predict : chr "test"</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">##  $ stratify: logi FALSE</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## List of 6</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb20-23" data-line-number="23">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-12" data-line-number="12">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-15" data-line-number="15">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-16" data-line-number="16">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-17" data-line-number="17">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-19" data-line-number="19">##   ..$ : int [1:100] 82 54 5 93 38 143 41 144 107 36 ...</a>
<a class="sourceLine" id="cb21-20" data-line-number="20">##   ..$ : int [1:100] 82 61 110 93 38 50 89 135 144 107 ...</a>
<a class="sourceLine" id="cb21-21" data-line-number="21">##   ..$ : int [1:100] 54 61 5 110 50 89 143 41 135 69 ...</a>
<a class="sourceLine" id="cb21-22" data-line-number="22">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-23" data-line-number="23">##   ..$ : int [1:50] 1 6 15 17 19 21 22 28 33 34 ...</a>
<a class="sourceLine" id="cb21-24" data-line-number="24">##   ..$ : int [1:50] 2 5 8 9 16 20 23 27 30 32 ...</a>
<a class="sourceLine" id="cb21-25" data-line-number="25">##   ..$ : int [1:50] 3 4 7 10 11 12 13 14 18 24 ...</a>
<a class="sourceLine" id="cb21-26" data-line-number="26">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-27" data-line-number="27">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-28" data-line-number="28"></a>
<a class="sourceLine" id="cb21-29" data-line-number="29"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb21-30" data-line-number="30">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb21-31" data-line-number="31"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-32" data-line-number="32">## List of 5</a>
<a class="sourceLine" id="cb21-33" data-line-number="33">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-34" data-line-number="34">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-35" data-line-number="35">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-36" data-line-number="36">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-37" data-line-number="37">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-38" data-line-number="38">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-39" data-line-number="39">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-40" data-line-number="40">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-41" data-line-number="41">##   ..$ : int [1:100] 123 117 45 1 64 59 75 24 93 71 ...</a>
<a class="sourceLine" id="cb21-42" data-line-number="42">##   ..$ : int [1:100] 117 97 10 1 3 64 75 114 24 31 ...</a>
<a class="sourceLine" id="cb21-43" data-line-number="43">##   ..$ : int [1:100] 123 97 10 45 3 59 114 93 31 71 ...</a>
<a class="sourceLine" id="cb21-44" data-line-number="44">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-45" data-line-number="45">##   ..$ : int [1:50] 3 5 10 11 14 16 22 25 31 33 ...</a>
<a class="sourceLine" id="cb21-46" data-line-number="46">##   ..$ : int [1:50] 2 6 7 9 12 20 27 29 37 41 ...</a>
<a class="sourceLine" id="cb21-47" data-line-number="47">##   ..$ : int [1:50] 1 4 8 13 15 17 18 19 21 23 ...</a>
<a class="sourceLine" id="cb21-48" data-line-number="48">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-49" data-line-number="49">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-50" data-line-number="50"></a>
<a class="sourceLine" id="cb21-51" data-line-number="51"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb21-52" data-line-number="52">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb21-53" data-line-number="53">##   [1] 123  97  10  45   3  59 114  93  31  71  46  48   7  98  44 146  57</a>
<a class="sourceLine" id="cb21-54" data-line-number="54">##  [18]   9  49  76  34  39  95  20 110  91  25 118  47 105  83 113 128   2</a>
<a class="sourceLine" id="cb21-55" data-line-number="55">##  [35]  12 116  68 136 108 142  61  79 125  33  22  85  87 148  56 107  73</a>
<a class="sourceLine" id="cb21-56" data-line-number="56">##  [52] 144 115  58 122 109  89  27  99 133  92  14  81  11 139 131 145  88</a>
<a class="sourceLine" id="cb21-57" data-line-number="57">##  [69]  50 104  86  54  62  55 141 100  41 143  37 149 124 147   6  65 111</a>
<a class="sourceLine" id="cb21-58" data-line-number="58">##  [86]  82  16 120  40  29  84 134 130 138  60  94 102 121  72   5</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-9" data-line-number="9">##     0.02666667</a>
<a class="sourceLine" id="cb22-10" data-line-number="10"></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">##     0.04666667</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h1>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">## &lt;bytecode: 0xc3a3558&gt;</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb24-10" data-line-number="10"></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb24-14" data-line-number="14"></a>
<a class="sourceLine" id="cb24-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb24-18" data-line-number="18">## &lt;bytecode: 0x137b9048&gt;</a>
<a class="sourceLine" id="cb24-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h2>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"></a>
<a class="sourceLine" id="cb25-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb25-14" data-line-number="14"></a>
<a class="sourceLine" id="cb25-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">## [Resample] iter 1:    25.775095325.775095325.775095325.7750953</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">## [Resample] iter 2:    23.476329823.476329823.476329823.4763298</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">## [Resample] iter 3:    23.844748123.844748123.844748123.8447481</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb25-23" data-line-number="23">## Aggregated Result: mse.test.mean=24.3653911,mse.test.median=23.8447481,mse.test.min=23.4763298,mse.test.max=25.7750953</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb25-25" data-line-number="25"></a>
<a class="sourceLine" id="cb25-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">## Aggr perf: mse.test.mean=24.3653911,mse.test.median=23.8447481,mse.test.min=23.4763298,mse.test.max=25.7750953</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">## Runtime: 0.0245693</a>
<a class="sourceLine" id="cb25-32" data-line-number="32"></a>
<a class="sourceLine" id="cb25-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##        24.36539        23.84475        23.47633        25.77510</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level2">
<h2 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h2>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">## [Resample] iter 1:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">## [Resample] iter 2:    0.0500000    0.1000000</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## [Resample] iter 3:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb26-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0733333,mmce.train.mean=0.0366667</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb26-12" data-line-number="12"></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">## 1    1 0.03 0.03</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">## 2    2 0.05 0.05</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">## 3    3 0.03 0.03</a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##      0.07333333      0.03666667</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level2">
<h2 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h2>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb27-17" data-line-number="17"></a>
<a class="sourceLine" id="cb27-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">## 1    1 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">## 2    2 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">## 3    3 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">## 4    4 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">## 5    5 0.04666667 0.04666667 0.04666667</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">## 6    6 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-28" data-line-number="28"></a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb27-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb27-32" data-line-number="32">##     0.04546885     0.04026698     0.04062079</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h1>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">## [Resample] iter 1:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">## [Resample] iter 2:    0.0400000 0.0444444</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">## [Resample] iter 3:    0.0200000 0.0185185</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0209877</a>
<a class="sourceLine" id="cb28-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb28-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb28-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb28-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0209877</a>
<a class="sourceLine" id="cb28-14" data-line-number="14">## Runtime: 0.022954</a>
<a class="sourceLine" id="cb28-15" data-line-number="15"></a>
<a class="sourceLine" id="cb28-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb28-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb28-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb28-19" data-line-number="19">## [Resample] iter 1:    23.9341871  3.6401519   21.3856548  3.3604845</a>
<a class="sourceLine" id="cb28-20" data-line-number="20">## [Resample] iter 2:    21.8756120  3.2472899   17.0219706  3.1182747</a>
<a class="sourceLine" id="cb28-21" data-line-number="21">## [Resample] iter 3:    20.3499246  3.2844405   27.3846721  3.4123549</a>
<a class="sourceLine" id="cb28-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb28-23" data-line-number="23">## Aggregated Result: mse.b632plus=22.0246688,mae.b632plus=3.3329288</a>
<a class="sourceLine" id="cb28-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb28-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb28-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb28-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb28-28" data-line-number="28">## Aggr perf: mse.b632plus=22.0246688,mae.b632plus=3.3329288</a>
<a class="sourceLine" id="cb28-29" data-line-number="29">## Runtime: 0.0341554</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking">Blocking</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
