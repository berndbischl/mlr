<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta property="og:image" content="https://mlr-org.github.io/mlr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>
      <div class="hidden name"><code>resample.Rmd</code></div>

    </div>

    
    
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h1>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level1">
<h1 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h1>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    26.4375787</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    25.8172364</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    17.8294707</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=23.3614286</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=23.3614286</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0369155</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      23.36143</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 26.43758</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 25.81724</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 17.82947</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.3571429   0.3157895   0.3913043   0.0180000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.2857143   0.2000000   0.3636364   0.0140000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.3333333   0.2941176   0.3600000   0.0140000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.3095238   0.4000000   0.2272727   0.0150000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.2380952   0.2380952   0.2380952   0.0140000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.3047619,fpr.test.mean=0.2896005,fnr.test.mean=0.3160617,timetrain.test.mean=0.0150000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.3047619,fpr.test.mean=0.2896005,fnr.test.mean=0.3160617,timetrain.test.mean=0.0150000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.13478</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.3047619,fpr.test.mean=0.2896005,fnr.test.mean=0.3160617,timetrain.test.mean=0.0150000,ber.test.mean=0.3028311,timepredict.test.mean=0.0046000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.13478</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2952381,fpr.test.mean=0.3114035,fnr.test.mean=0.2758454,timetrain.test.mean=0.0158000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.130647</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h1>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h2>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 163     M        M    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2  90     R        R    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3  78     R        R    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 165     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5 125     M        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 196     M        M    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 163     M        M    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2  90     R        R    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3  78     R        R    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 165     M        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5 125     M        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 196     M        M    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 163     M        M    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2  90     R        R    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3  78     R        R    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 165     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5 125     M        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 196     M        M    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M R R M M M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] M R R M M M</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0129044</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.02</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 100 100 versicolor versicolor</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 112 112  virginica  virginica</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 66   66 versicolor versicolor</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 108 108  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 7     7     setosa     setosa</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 12   12     setosa     setosa</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 8     8     setosa     setosa</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 141 141  virginica  virginica</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 107 107  virginica versicolor</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 86   86 versicolor versicolor</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 144 144  virginica  virginica</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 5     5     setosa     setosa</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level2">
<h2 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h2>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level2">
<h2 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h2>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg      cyl     disp        hp     drat       wt     qsec</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 25.06667 4.666667 123.0500  97.33333 4.020833 2.540667 18.56000</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 18.33333 6.666667 267.0000 121.66667 2.866667 3.398333 18.84333</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 14.58333 8.000000 363.6667 246.50000 3.475000 3.835667 15.86500</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##          vs        am     gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 0.7500000 0.6666667 4.250000 2.583333</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 0.6666667 0.0000000 3.000000 1.333333</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 0.0000000 0.3333333 3.666667 4.333333</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg cyl     disp        hp     drat       wt     qsec  vs        am</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 19.50000   6 174.4000 128.25000 3.550000 3.072500 17.62000 0.5 0.5000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 15.11818   8 357.4000 189.54545 3.112727 4.152636 17.26091 0.0 0.0000000</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 25.96667   4 100.3167  90.66667 3.931667 2.202167 18.74833 1.0 0.8333333</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##   gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1    4 3.750000</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2    3 3.000000</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3    4 1.333333</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg      cyl     disp        hp     drat       wt     qsec</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 17.10000 7.600000 277.8800 160.00000 3.088000 3.646000 17.94800</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 24.31818 4.545455 123.8455  89.09091 4.072727 2.549545 18.90091</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 14.90000 8.000000 387.3333 242.33333 3.368333 4.125000 16.23167</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##          vs        am     gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 0.2000000 0.0000000 3.000000 2.400000</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 0.7272727 0.6363636 4.000000 2.272727</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 0.0000000 0.3333333 3.666667 4.333333</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn   indus chas      nox      rm      age      dis</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 3001.123 2213.008 6172.03    0 3180.527 18417.6 3088.736 3082.117</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##       rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 946.698 2727.203 3853.184 0 13326.62</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim       zn    indus chas     nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 2988.545 785.6666 2551.431    0 2738.89 14915.48 2711.452 2674.029</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 865.8341 831.5271 2016.325 224.6667 9557.042</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim      zn    indus     chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 4952.251 1544.67 5083.684 499.5026 1477.063 15916.15 3108.813 3336.305</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##   rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1   0 3062.718 3148.811 0 11343.42</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 282  39 341 182  21 205  52 352 377 218 402  93 470  20 188  83 356</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18]  54 413  55 107 339  11 363  27 256 334 354 466 101 173 199 201  43</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 181 349 290 115 465 361 275 136 215 212 149 319 237 331 317 371 214</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 169 386 476 272 206 379  35 192 453 502 337 458  15 103 308  64 180</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 431 350 244 300 335 100 422  34 410   7 191 498 433 404 481 254 419</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86]  98 221  75 104 322 480 271 385 227 128 158 390 295 459 376 446 174</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 305  77 222 443 387 177 388  69 357 240  84 463 233  90  88 289 225</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120] 375  81 318 406  92 160  42 358  33  56 123 428 381 492 119 399 228</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 171 239 452 369 427  32 423 489 285 274 484 441  96 253 200 425 394</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 469 125  40 280 204 170 189  38  97 196 151 360 164 118 179 261 235</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171] 278 112  95 391 343 400 186 249 246 442 460 138 292  86 438 457 302</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188] 336 250  72 464 234 418  18 370 224  67 409 217 415 321 408  73 478</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205]   8 279 435 491  25  13  68 397  76 168 366 471 395 167 245 131 323</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222] 485 195 496 396 351 294 146 216 306  59  28  99 449 483  30   5 264</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239] 424 501 327 108 329 362 257 440 368 372 444 190 251 284 505 172 500</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256] 197  58  87   6 364 430 213 203 263 121 154 490 299 243 147 359 414</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 324 185  89 202 416 456  49 269 367 355 472 161 211 330 258 142 184</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290]  80 134 494 209 347 259 389  71 113 194  50 288 163 344  82  94 193</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307]  31 132 260 384 140 325 268 106 488 467 255 312 230 434 178 135  12</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 156 380  24  19  74 124 276  57  48  36 310 252 111   9</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 282 293 432 210 474 447  78  65 129  23 270 429  21 266 205 411 152</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18]  52 352 420  93 398 470 188 348 356  22  54  55 339 363  60 256 487</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 309 101 173 199  43 349 115 315  46 275 136 212 499 149 331 176  62</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 371 426 150 214 133 287 386 148 476 220 232 455 486 379 462 453 304</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 337 451 332 159 338 180 326   4 431 393 244 100 109  34 410   7 495</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86] 433 404 481 419  98  75 104 162  51 437 385 227 128 187 158 390 295</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 376 446 305 145  77 222 365 177 265 143 388 357   3 240 401 166 233</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 448 117 375 318 406 219 407 358 123 492 262 450 171 392 403 427 313</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 441 144 506 207 482  96 425 394 125 198 298 204 170 189 301  97 320</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154] 153  14 497 439 179  70 277 353  85 165 316 112 267  95 343 504 400</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 186 249 246 442  10 281 229 126 175 460 138  86 438 155 457  29 183</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 273 336 226 250  72 157 345 464 114 116  18 370   1 224 421 333 238</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205]  67 283 137 478 248  91  25 477 342 236  13  61 242 366 471  53 167</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 245 454 485 195 496 396 351 294 314 146  79 374 105 306 461  28 483</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239]   5 264 503 493 501 120 412 108 383 329 340 440 368 444 190 127  44</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 307 208  16 110 172 241 473  87   6  41 364 430 203 263 121 154 311</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273] 490 299 243 147 445 359 468 102 185 346  66   2 202 130 416 456  49</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 328  63 367 405  47 211 330 184 479 231 303 134 494 382 259 436 475</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307]  71 297 139  50  82 132 140  26 247 106 373 223 378 291 230 417  12</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 156  24 141 276  57  48  45 286  37  36  17 122 111 296</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 293 432  39 210 474 447  78  65 341 129  23 182 270 429 266 411 152</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 420 377 218 402 398  20  83 348  22 413 107  11  60  27 334 487 354</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35] 466 309 201 181 290 315 465  46 361 215 499 319 237 176  62 317 426</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 150 169 133 287 148 272 206 220 232 455 486  35 192 462 502 304 451</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 458  15 332 159 103 338 308  64 326   4 393 350 300 335 109 422 191</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 495 498 254 221 162  51 322 480 271 437 187 459 174 145 443 365 387</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 265 143  69   3 401  84 166 463  90  88 289 225 448 117  81  92 219</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 160 407  42  33  56 428 381 262 119 450 399 228 392 239 403 452 369</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137]  32 423 489 313 285 274 484 144 506 207 482 253 200 469 198  40 298</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 280 301  38 320 196 151 360 164 153  14 497 118 439  70 261 277 235</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171] 278 353  85 165 316 267 391 504  10 281 229 126 175 292 155 302  29</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188] 183 273 226 157 345 114 234 418 116   1 421 333 238 409 283 137 217</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 415 321 408  73   8 279 435 491 248  91 477 342 236  68 397  76 168</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222]  61 242  53 395 131 323 454 314  79 374 216 105  59 461  99 449  30</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239] 503 424 493 120 412 327 383 362 340 257 372 251 284 127  44 505 307</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 208  16 110 500 197  58 241 473  41 213 311 445 414 324 468 102 346</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273]  66   2  89 130 328  63 269 405  47 355 472 161 258 142 479  80 231</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 303 382 209 347 389 436 475 113 194 297 139 288 163 344  94 193  31</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307] 260 384 325  26 268 247 373 488 467 223 378 291 255 312 434 178 135</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 417 380  19 141  74 124  45 286  37  17 310 252 122 296   9</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   1   2   3   4  10  14  16  17  22  23  26  29  37  41  44  45  46</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  47  51  53  60  61  62  63  65  66  70  78  79  85  91 102 105 109</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 110 114 116 117 120 122 126 127 129 130 133 137 139 141 143 144 145</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 148 150 152 153 155 157 159 162 165 166 175 176 183 187 198 207 208</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 210 219 220 223 226 229 231 232 236 238 241 242 247 248 262 265 266</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 267 270 273 277 281 283 286 287 291 293 296 297 298 301 303 304 307</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 309 311 313 314 315 316 320 326 328 332 333 338 340 342 345 346 348</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 353 365 373 374 378 382 383 392 393 398 401 403 405 407 411 412 417</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 420 421 426 429 432 436 437 439 445 447 448 450 451 454 455 461 462</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 468 473 474 475 477 479 482 486 487 493 495 497 499 503 504 506</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   8   9  11  15  19  20  27  30  31  32  33  35  38  39  40  42  56</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  58  59  64  68  69  73  74  76  80  81  83  84  88  89  90  92  94</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35]  99 103 107 113 118 119 124 131 135 142 151 160 161 163 164 168 169</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 174 178 181 182 191 192 193 194 196 197 200 201 206 209 213 215 216</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 217 218 221 225 228 234 235 237 239 251 252 253 254 255 257 258 260</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 261 268 269 271 272 274 278 279 280 284 285 288 289 290 292 300 302</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 308 310 312 317 319 321 322 323 324 325 327 334 335 341 344 347 350</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 354 355 360 361 362 369 372 377 380 381 384 387 389 391 395 397 399</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 402 408 409 413 414 415 418 422 423 424 428 434 435 443 449 452 458</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 459 463 465 466 467 469 472 480 484 488 489 491 498 500 502 505</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   5   6   7  12  13  18  21  24  25  28  34  36  43  48  49  50  52</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  54  55  57  67  71  72  75  77  82  86  87  93  95  96  97  98 100</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 101 104 106 108 111 112 115 121 123 125 128 132 134 136 138 140 146</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 147 149 154 156 158 167 170 171 172 173 177 179 180 184 185 186 188</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 189 190 195 199 202 203 204 205 211 212 214 222 224 227 230 233 240</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 243 244 245 246 249 250 256 259 263 264 275 276 282 294 295 299 305</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 306 318 329 330 331 336 337 339 343 349 351 352 356 357 358 359 363</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 364 366 367 368 370 371 375 376 379 385 386 388 390 394 396 400 404</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 406 410 416 419 425 427 430 431 433 438 440 441 442 444 446 453 456</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 457 460 464 470 471 476 478 481 483 485 490 492 494 496 501</a></code></pre></div>
</div>
</div>
<div id="stratification-and-blocking" class="section level1">
<h1 class="hasAnchor">
<a href="#stratification-and-blocking" class="anchor"></a>Stratification and blocking</h1>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h2>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0266773</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.226008</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h2>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=21.2743592</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0310886</a></code></pre></div>
</div>
<div id="blocking-grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#blocking-grouping" class="anchor"></a>Blocking &amp; Grouping</h2>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
<p>When performing a simple “CV” resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate the grouping, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Measures:             mmce</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## [Resample] iter 1:    0.0500000</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## [Resample] iter 2:    0.0000000</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## [Resample] iter 3:    0.0000000</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## Aggregated Result: mmce.test.mean=0.0166667</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">## [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">## [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## [52]  52  53  54  55  56  57  58  59  60  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">## [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">## [86] 116 117 118 119 120</a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">## [1] 90</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## [1] 90</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">## [1] 120</a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
<div id="blocking-with-fully-pre-defined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#blocking-with-fully-pre-defined-indices" class="anchor"></a>Blocking with fully pre-defined indices</h3>
<p>There is a second way of using pre-defined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as “grouping” to distinguish it from “blocking”. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## levels to match number of blocking levels.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Measures:             mmce</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## [Resample] iter 2:    0.0000000</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">## [Resample] iter 3:    0.1000000</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">## [Resample] iter 4:    0.1000000</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">## [Resample] iter 5:    0.0000000</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">## Aggregated Result: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  61  62  63  64</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">##  [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">##  [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">##  [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">##  [86] 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132</a>
<a class="sourceLine" id="cb22-22" data-line-number="22">## [103] 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">## [120] 150</a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## [1] 120</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">## [1] 120</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## [[4]]</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">## [1] 120</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## [[5]]</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## [1] 120</a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g. in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that honor the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling “CV” description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">## List of 5</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">##   .. ..$ : int [1:90] 113 93 48 62 7 90 37 56 23 35 ...</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">##   .. ..$ : int [1:90] 113 93 48 62 7 37 56 35 80 45 ...</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">##   .. ..$ : int [1:90] 113 93 7 90 37 23 35 86 80 36 ...</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">##   .. ..$ : int [1:90] 48 62 90 56 23 86 36 75 45 44 ...</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">##   .. ..$ : int [1:30] 1 6 9 10 14 16 29 30 34 43 ...</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">##   .. ..$ : int [1:30] 2 3 8 18 21 23 25 36 38 41 ...</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">##   .. ..$ : int [1:30] 4 5 11 12 13 15 19 22 26 32 ...</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   .. ..$ : int [1:30] 7 17 20 24 27 28 31 35 37 40 ...</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">##   .. ..$ : int [1:90] 92 117 74 52 114 91 71 50 63 60 ...</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">##   .. ..$ : int [1:90] 92 86 117 74 114 91 71 63 60 51 ...</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##   .. ..$ : int [1:90] 92 86 117 74 52 50 51 118 28 93 ...</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##   .. ..$ : int [1:90] 86 52 114 91 71 50 63 60 51 93 ...</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">##   .. ..$ : int [1:30] 2 3 7 14 16 17 21 33 35 38 ...</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">##   .. ..$ : int [1:30] 4 10 18 19 22 23 29 32 36 41 ...</a>
<a class="sourceLine" id="cb25-23" data-line-number="23">##   .. ..$ : int [1:30] 1 5 8 9 11 12 26 27 30 39 ...</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">##   .. ..$ : int [1:30] 6 13 15 20 24 25 28 31 34 37 ...</a>
<a class="sourceLine" id="cb25-25" data-line-number="25">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-26" data-line-number="26">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">##   .. ..$ : int [1:90] 20 18 10 19 40 73 111 52 48 66 ...</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">##   .. ..$ : int [1:90] 20 18 10 95 40 73 60 24 111 52 ...</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">##   .. ..$ : int [1:90] 10 19 95 73 60 24 111 55 65 103 ...</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">##   .. ..$ : int [1:90] 20 18 19 95 40 60 24 52 48 55 ...</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-32" data-line-number="32">##   .. ..$ : int [1:30] 4 14 23 24 26 28 31 35 38 45 ...</a>
<a class="sourceLine" id="cb25-33" data-line-number="33">##   .. ..$ : int [1:30] 5 6 11 12 13 16 19 21 27 32 ...</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   .. ..$ : int [1:30] 2 3 8 18 20 22 25 36 37 40 ...</a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##   .. ..$ : int [1:30] 1 7 9 10 15 17 29 30 34 42 ...</a>
<a class="sourceLine" id="cb25-36" data-line-number="36">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-37" data-line-number="37">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-38" data-line-number="38">##   .. ..$ : int [1:90] 32 49 70 20 38 82 56 115 47 92 ...</a>
<a class="sourceLine" id="cb25-39" data-line-number="39">##   .. ..$ : int [1:90] 32 49 14 99 82 115 35 47 116 92 ...</a>
<a class="sourceLine" id="cb25-40" data-line-number="40">##   .. ..$ : int [1:90] 14 70 20 38 99 82 56 115 35 116 ...</a>
<a class="sourceLine" id="cb25-41" data-line-number="41">##   .. ..$ : int [1:90] 32 49 14 70 20 38 99 56 35 47 ...</a>
<a class="sourceLine" id="cb25-42" data-line-number="42">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-43" data-line-number="43">##   .. ..$ : int [1:30] 1 2 7 14 17 19 23 35 37 41 ...</a>
<a class="sourceLine" id="cb25-44" data-line-number="44">##   .. ..$ : int [1:30] 3 11 20 21 24 26 30 34 38 44 ...</a>
<a class="sourceLine" id="cb25-45" data-line-number="45">##   .. ..$ : int [1:30] 4 5 8 9 10 12 15 18 25 31 ...</a>
<a class="sourceLine" id="cb25-46" data-line-number="46">##   .. ..$ : int [1:30] 6 13 16 22 27 28 29 33 36 40 ...</a>
<a class="sourceLine" id="cb25-47" data-line-number="47">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-48" data-line-number="48">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-49" data-line-number="49">##   .. ..$ : int [1:90] 78 116 118 53 35 114 85 5 104 80 ...</a>
<a class="sourceLine" id="cb25-50" data-line-number="50">##   .. ..$ : int [1:90] 118 92 53 85 5 4 108 80 95 69 ...</a>
<a class="sourceLine" id="cb25-51" data-line-number="51">##   .. ..$ : int [1:90] 78 116 118 92 35 114 85 5 104 4 ...</a>
<a class="sourceLine" id="cb25-52" data-line-number="52">##   .. ..$ : int [1:90] 78 116 92 53 35 114 104 4 108 40 ...</a>
<a class="sourceLine" id="cb25-53" data-line-number="53">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-54" data-line-number="54">##   .. ..$ : int [1:30] 3 4 9 10 11 14 17 19 24 32 ...</a>
<a class="sourceLine" id="cb25-55" data-line-number="55">##   .. ..$ : int [1:30] 6 16 18 22 26 27 30 35 37 40 ...</a>
<a class="sourceLine" id="cb25-56" data-line-number="56">##   .. ..$ : int [1:30] 2 12 20 21 23 25 31 36 38 45 ...</a>
<a class="sourceLine" id="cb25-57" data-line-number="57">##   .. ..$ : int [1:30] 1 5 7 8 13 15 28 29 34 42 ...</a></code></pre></div>
</div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level1">
<h1 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h1>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## List of 6</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">##  $ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">##  $ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">##  $ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">##  $ iters      : int 3</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">##  $ predict    : chr "test"</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##  $ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## List of 8</a>
<a class="sourceLine" id="cb26-19" data-line-number="19">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">##  $ fixed        : logi FALSE</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">##  $ blocking.cv  : logi FALSE</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-20" data-line-number="20">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   ..$ : int [1:100] 39 129 51 117 17 50 99 110 96 136 ...</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">##   ..$ : int [1:100] 39 42 51 37 17 145 58 99 100 53 ...</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">##   ..$ : int [1:100] 42 129 117 37 145 58 50 100 53 83 ...</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">##   ..$ : int [1:50] 3 7 8 9 10 12 13 15 19 24 ...</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">##   ..$ : int [1:50] 2 5 11 18 22 25 34 35 36 38 ...</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">##   ..$ : int [1:50] 1 4 6 14 16 17 20 21 23 26 ...</a>
<a class="sourceLine" id="cb27-28" data-line-number="28">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-29" data-line-number="29">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-30" data-line-number="30"></a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb27-32" data-line-number="32">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb27-33" data-line-number="33"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-34" data-line-number="34">## List of 5</a>
<a class="sourceLine" id="cb27-35" data-line-number="35">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-36" data-line-number="36">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-37" data-line-number="37">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-38" data-line-number="38">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-39" data-line-number="39">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-40" data-line-number="40">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-41" data-line-number="41">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-42" data-line-number="42">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-43" data-line-number="43">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-44" data-line-number="44">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-45" data-line-number="45">##   ..$ : int [1:100] 85 103 117 96 54 120 72 146 87 91 ...</a>
<a class="sourceLine" id="cb27-46" data-line-number="46">##   ..$ : int [1:100] 52 117 137 96 66 14 136 19 120 72 ...</a>
<a class="sourceLine" id="cb27-47" data-line-number="47">##   ..$ : int [1:100] 85 103 52 137 66 14 54 136 19 87 ...</a>
<a class="sourceLine" id="cb27-48" data-line-number="48">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-49" data-line-number="49">##   ..$ : int [1:50] 6 7 8 9 10 11 12 14 19 27 ...</a>
<a class="sourceLine" id="cb27-50" data-line-number="50">##   ..$ : int [1:50] 2 3 5 21 23 24 25 29 30 31 ...</a>
<a class="sourceLine" id="cb27-51" data-line-number="51">##   ..$ : int [1:50] 1 4 13 15 16 17 18 20 22 26 ...</a>
<a class="sourceLine" id="cb27-52" data-line-number="52">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-53" data-line-number="53">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-54" data-line-number="54"></a>
<a class="sourceLine" id="cb27-55" data-line-number="55"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb27-56" data-line-number="56">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb27-57" data-line-number="57">##   [1]  85 103  52 137  66  14  54 136  19  87  79 107   7  70 127  11  37</a>
<a class="sourceLine" id="cb27-58" data-line-number="58">##  [18]  67 139   3  39  58 140   2 115  78  46  41 132  61  64  49  63  45</a>
<a class="sourceLine" id="cb27-59" data-line-number="59">##  [35]  28 100  65 125 121  23 118   9  95  81  55 138  48 122   5  30 108</a>
<a class="sourceLine" id="cb27-60" data-line-number="60">##  [52]  33  98 129 150  34 145 116  76 133 131 143  82 106 110  36  88  60</a>
<a class="sourceLine" id="cb27-61" data-line-number="61">##  [69]  56  73 114  86  93 144 112  24  25  10  68  47 149  27 130  31  69</a>
<a class="sourceLine" id="cb27-62" data-line-number="62">##  [86]  50   6  21  92 105 135  44   8 111  12  32  62  29 148 142</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-9" data-line-number="9">##     0.02666667</a>
<a class="sourceLine" id="cb28-10" data-line-number="10"></a>
<a class="sourceLine" id="cb28-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-13" data-line-number="13">##     0.07333333</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h1>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">## &lt;bytecode: 0x9fac8b0&gt;</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb30-10" data-line-number="10"></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb30-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb30-14" data-line-number="14"></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb30-18" data-line-number="18">## &lt;bytecode: 0x124185a0&gt;</a>
<a class="sourceLine" id="cb30-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h2>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb31-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb31-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb31-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb31-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb31-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb31-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb31-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb31-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb31-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb31-19" data-line-number="19">## [Resample] iter 1:    21.399290421.399290421.399290421.3992904</a>
<a class="sourceLine" id="cb31-20" data-line-number="20">## [Resample] iter 2:    17.652028417.652028417.652028417.6520284</a>
<a class="sourceLine" id="cb31-21" data-line-number="21">## [Resample] iter 3:    37.041884237.041884237.041884237.0418842</a>
<a class="sourceLine" id="cb31-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb31-23" data-line-number="23">## Aggregated Result: mse.test.mean=25.3644010,mse.test.median=21.3992904,mse.test.min=17.6520284,mse.test.max=37.0418842</a>
<a class="sourceLine" id="cb31-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb31-25" data-line-number="25"></a>
<a class="sourceLine" id="cb31-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb31-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb31-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb31-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb31-30" data-line-number="30">## Aggr perf: mse.test.mean=25.3644010,mse.test.median=21.3992904,mse.test.min=17.6520284,mse.test.max=37.0418842</a>
<a class="sourceLine" id="cb31-31" data-line-number="31">## Runtime: 0.0281444</a>
<a class="sourceLine" id="cb31-32" data-line-number="32"></a>
<a class="sourceLine" id="cb31-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb31-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb31-35" data-line-number="35">##        25.36440        21.39929        17.65203        37.04188</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level2">
<h2 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h2>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">## [Resample] iter 1:    0.0200000    0.1000000</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">## [Resample] iter 2:    0.0400000    0.0400000</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">## [Resample] iter 3:    0.0200000    0.0800000</a>
<a class="sourceLine" id="cb32-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb32-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0733333,mmce.train.mean=0.0266667</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb32-12" data-line-number="12"></a>
<a class="sourceLine" id="cb32-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">## 1    1 0.02 0.02</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">## 2    2 0.04 0.04</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">## 3    3 0.02 0.02</a>
<a class="sourceLine" id="cb32-18" data-line-number="18"></a>
<a class="sourceLine" id="cb32-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb32-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb32-21" data-line-number="21">##      0.07333333      0.02666667</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level2">
<h2 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h2>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb33-7" data-line-number="7"></a>
<a class="sourceLine" id="cb33-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb33-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb33-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb33-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb33-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb33-17" data-line-number="17"></a>
<a class="sourceLine" id="cb33-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb33-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb33-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb33-21" data-line-number="21">##   iter        mmce        mmce        mmce</a>
<a class="sourceLine" id="cb33-22" data-line-number="22">## 1    1 0.006666667 0.006666667 0.006666667</a>
<a class="sourceLine" id="cb33-23" data-line-number="23">## 2    2 0.040000000 0.040000000 0.040000000</a>
<a class="sourceLine" id="cb33-24" data-line-number="24">## 3    3 0.040000000 0.040000000 0.040000000</a>
<a class="sourceLine" id="cb33-25" data-line-number="25">## 4    4 0.026666667 0.026666667 0.026666667</a>
<a class="sourceLine" id="cb33-26" data-line-number="26">## 5    5 0.026666667 0.026666667 0.026666667</a>
<a class="sourceLine" id="cb33-27" data-line-number="27">## 6    6 0.026666667 0.026666667 0.026666667</a>
<a class="sourceLine" id="cb33-28" data-line-number="28"></a>
<a class="sourceLine" id="cb33-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb33-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb33-32" data-line-number="32">##     0.04871034     0.04084360     0.04154064</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h1>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">## [Resample] iter 1:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">## [Resample] iter 2:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">## [Resample] iter 3:    0.0600000 0.0583333</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0194444</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb34-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0194444</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">## Runtime: 0.0246878</a>
<a class="sourceLine" id="cb34-15" data-line-number="15"></a>
<a class="sourceLine" id="cb34-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb34-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">## [Resample] iter 1:    21.5853287  3.2136807   19.5315169  3.2980030</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">## [Resample] iter 2:    23.6233524  3.4120532   23.0691918  3.4278864</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">## [Resample] iter 3:    16.2493870  2.7798018   29.7486908  3.6722758</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb34-23" data-line-number="23">## Aggregated Result: mse.b632plus=22.9095721,mae.b632plus=3.3550545</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb34-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb34-28" data-line-number="28">## Aggr perf: mse.b632plus=22.9095721,mae.b632plus=3.3550545</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">## Runtime: 0.0399656</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking-grouping">Blocking &amp; Grouping</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
